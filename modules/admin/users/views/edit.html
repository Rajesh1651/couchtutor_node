<% 
	result = (typeof result !== typeof undefined)?	result 	: {};	
	profile_image = (typeof result.profile_image !== typeof undefined)?	result.profile_image 	: ""; 
	var image 	  	=	(result['image'])	? result['image']	:user-male.png;
	
	result = (formData)?	formData 	: result ;
%>

<div class="container-fluid" id="main-container">
	<div class="row clearfix">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div class="card">
				<div class="header">
					<h2>Edit User</h2>
					<ul class="header-dropdown m-r--5 btn-right-top-margin">
						<li>
							<a href="<%=admin_list_url%>/<%= user_type %>" >
								<button type="button" class="btn bg-indigo waves-effect">
									<i class="material-icons font-14">keyboard_backspace</i> Back
								</button>
							</a>
						</li>
					</ul>
				</div>
				<div class="body">
					<form id="edit-user" data-submit-btn-id="user-edit-btn-id" method="post" role="form" enctype="multipart/form-data">
						<div class="row clearfix">
						
								<div class="row clearfix">
									<div class="col-sm-12 align-center">
										<div class="form-group add-image">
											<input name="old_image" id="old_image" type="hidden" class="form-control"  value="<%= profile_image %>"/>
											<input name="profile_image" id="profile_image" class="form-control image-input-file" type="file"/>
											<span class="help-inline required profile_image" id="ContentTypeNameSpan">
												<div id="pImage">
													<img src="<%=USERS_URL + image%>?dim=120x120&type=resize" alt="Profile image" class="profileImage" />
												</div>
											</span>
											<br/>
											<div>
												<a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="<%= "Allowed file extensions :"+ALLOWED_IMAGE_EXTENSIONS%>" class="btn bg-teal btn-block btn-sm waves-effect changePhoto">Upload Image</a>
											</div>
											<% if(typeof error != "undefined" && error.profile_image){  %>
												<span id="profile_image_error" class="error"><%= error.profile_image.msg %></span>
											<% } %>
										</div>
									</div>
								</div>
							
							 
						</div>
						
						<div class="row clearfix">
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="first_name" class="control-label">First Name <span class="required"> *</span> </label>
										<input name="first_name" id="first_name" type="text" class="form-control" value="<%= result.first_name %>"/>
									</div>
									<% if(typeof error != "undefined" && error.first_name){  %>
										<span id="first_name_error" class="error"><%= error.first_name.msg %></span>
									<% } %>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="last_name" class="control-label">Last Name <span class="required"> *</span> </label>
										<input name="last_name" id="last_name" type="text" class="form-control" value="<%= result.last_name %>"/>
									</div>
									<% if(typeof error != "undefined" && error.last_name){  %>
										<span id="last_name_error" class="error"><%= error.last_name.msg %></span>
									<% } %>
								</div>
							</div>
						</div>
						
						
						
						<div class="row clearfix">		
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line cursor-not-allowed">
										<label for="email" class="control-label">Email <span class="required"> * </span> </label>
										<input name="email" id="email" type="text" class="form-control" value="<%=(result.email) ? result.email :"";%>" />
									</div>
									<% if(typeof error != "undefined" && error.email){  %>
										<span id="email_error" class="error"><%= error.email.msg %></span>
									<% } %>
								</div>
							</div>
 
							<div class="col-sm-6 country-code-mask">
								<label for="mobile_number" class="control-label">Mobile Number <span class="required"> *</span> </label>
								<div class="input-group">
									<div class="form-line">
										<input name="phone_number" id="userMobile" type="text" class="form-control" value="<%= result.phone_number %>"/>
										<input name="phone" id="userPhone" type="hidden" value="<%= result.phone %>" class="userphonecode"/>
										<input name="dial_code" id="dial_code" type="hidden" value="<%= result.dial_code %>" class="dial_code"/>
									</div>
									<% if(typeof error != "undefined" && error.phone){  %>
										<span id="phone_error" class="error"><%= error.phone.msg %></span>
									<% } %>
								</div>
							</div>
						</div>
						
						<div class="row clearfix">
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-lie">
										<label for="gender" class="control-label">Gender <span class="required">* </span> </label>
										<br />
										<%
										if(typeof GENDER_DROPDOWN!== typeof undefined && Object.keys(GENDER_DROPDOWN).length > 0){
											Object.keys(GENDER_DROPDOWN).map(genderStatus=>{
											
												checked = '';
												if(genderStatus == result.gender){
													checked = 'checked="true"';
												}
												
											%>
												<input id="<%=genderStatus%>" name="gender"  class="with-gap" type="radio" value="<%=genderStatus%>"   <%= checked %> / >
												<label for="<%=genderStatus%>"><%= (GENDER_DROPDOWN[genderStatus]) ? GENDER_DROPDOWN[genderStatus] :""; %></label>
										<% 	});
										} %>
									</div>
									<% if(typeof error != "undefined" && error.gender){  %>
										<span id="gender_error" class="error"><%= error.gender.msg %></span>
									<% } %>
								</div>
							</div> 			
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="dateofbirth" class="control-label">Date Of Birth<span class="required">* </span> </label><br />										

										<input type="text" class="datepicker form-control" name="dateofbirth" id="dateofbirth" readonly='true'  value="<%=(result.dateofbirth) ? result.dateofbirth :'';%>"   />
									</div>
									<% if(typeof error != "undefined" && error.dateofbirth){  %>
										<span id="dateofbirth_error" class="error"><%= error.dateofbirth.msg %></span>
									<% } %>
								</div>
							</div>
						</div>

						<div class="row clearfix">
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="country_id" class="control-label"><%= __("admin.system.country"); %> <span class="required">* </span>:</label>
										<select onchange="getStateData(this.value)" data-live-search="true" class="form-control show-tick" id="country_id" name="country_id" >
											<option value=""><%= __("admin.global.select_country"); %></option>
											<%- country_list %>
										</select>
									</div>
									<% if(typeof error != "undefined" && error.country_id){  %>
										<span id="country_id_error" class="error"><%= error.country_id.msg %></span>
									<% } %>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="state_id" class="control-label"><%= __("admin.system.state"); %> <span class="required">* </span>:</label>
										
										<div id="state_id_div">
											<select onchange="getCityData(this.value)" data-live-search="true" class="form-control show-tick" id="state_id" name="state_id" >
												<option value=""><%= __("admin.global.select_state"); %></option>
												<%- state_list %>
											</select>
										</div>
									</div>
									<% if(typeof error != "undefined" && error.state_id){  %>
										<span id="state_id_error" class="error"><%= error.state_id.msg %></span>
									<% } %>
								</div>
							</div>
						</div>
						
						
						<div class="row clearfix">
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="city_id" class="control-label"><%= __("admin.system.city"); %> <span class="required">* </span>:</label>
										<div id="city_id_div">	
											<select data-live-search="true" class="form-control show-tick" id="city_id" name="city_id" >
												<option value=""><%= __("admin.global.select_city"); %></option>
												<%- city_list %>
											</select>
										</div>
									</div>
									<% if(typeof error != "undefined" && error.city_id){  %>
										<span id="city_id_error" class="error"><%= error.city_id.msg %></span>
									<% } %>
								</div>
							</div>
						</div>


						<div class="row clearfix">
							<div class="col-sm-12">
								<div class="alert alert-info">
									<i class="material-icons pull-left font-18">info</i>&nbsp;  "Please leave blank if you do not want to change password."
								</div>
							</div>
						</div>
						<div class="row clearfix">
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="password" class="control-label">Password </label>
										<input name="password" id="password" type="password" class="form-control"/>
									</div>
									<% if(typeof error != "undefined" && error.password){  %>
										<span id="password_error" class="error"><%= error.password.msg %></span>
									<% } %>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<div class="form-line">
										<label for="confirm_password" class="control-label">Confirm password</label>
										<input name="confirm_password" id="confirm_password" type="password" class="form-control"/>
									</div>
									<% if(typeof error != "undefined" && error.confirm_password){  %>
										<span id="confirm_password_error" class="error"><%= error.confirm_password.msg %></span>
									<% } %>
								</div>
							</div>
						</div>
						<button type="submit" id="admin-login-btn-id" class="btn bg-pink btn-sm waves-effect btn-submit" data-loading-text='<i class="material-icons font-14">save</i> Loading...' ><i class="material-icons font-14">save</i>Submit</button>

						<a href="javascript:location.reload(true);" class="text-decoration-none"><button type="button" class="btn bg-blue-grey btn-sm waves-effect"><i class="material-icons font-14">refresh</i> Reset</button></a>

						<a href="<%= admin_list_url %>/<%= user_type %>"><button type="button" class="btn bg-brown btn-sm waves-effect"><i class="material-icons font-14">cancel</i>Cancel </button></a>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

<%- contentFor("css") %>
	<link rel="stylesheet" href="<%=WEBSITE_ADMIN_JS_PLUGIN_PATH%>daterange/daterangepicker.css">	
	<link rel="stylesheet" href="<%=WEBSITE_ADMIN_JS_PLUGIN_PATH%>bootstrap-select/css/bootstrap-select.css">
	<link href="<%=WEBSITE_ADMIN_CSS_PATH%>intl-tel-input/intlTelInput.css" rel="stylesheet">	
	
<%- contentFor("script") %>
<script type="text/javascript">
	$(document).ready(function() {
		phoneNumValidate('userMobile', 'phone_error', 'userPhone');
	});		
</script>


	<script type="text/javascript">
		var defaultTimeZone = '<%=DEFAULT_TIME_ZONE%>';
		var dateRangeFormat = '<%=DATE_RANGE_DATE_FORMAT%>';
	</script>
	<script type="text/javascript" src="<%= WEBSITE_ADMIN_JS_PLUGIN_PATH %>bootstrap-select/js/bootstrap-select.js"></script>
	<script type="text/javascript" src="<%=WEBSITE_ADMIN_JS_PLUGIN_PATH%>daterange/daterangepicker.js"></script>
	<script src="<%=WEBSITE_ADMIN_JS_PATH%>intl-tel-input/intlTelInput.js" type="text/javascript" ></script>
	<script type="text/javascript" src="<%=WEBSITE_ADMIN_JS_PATH%>get_state_city_ajax.js"></script>
	<script type="text/javascript" src="<%=WEBSITE_ADMIN_JS_PATH%>user_add_edit.js"></script>

